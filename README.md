# はじめに
本プロジェクトは書籍ビューアで [Swiper](http://idangero.us/swiper/) を使用できるかを検証するためのテストコードを集めたものです。
v4.2.6を６６使用しているので他のバージョンでは動作が異なる可能性もあります。


# 0010.htm
ひとまず最低限の要素を配置しただけ。swiperのインスタンスを変数に入れているけど、それを使う予定がないのであれば
`new Swiper('.swiper-container');`だけでも動作はするもよう。


# 0020.htm
0010.htmlのスクロールの方向を右→左に変更しただけ。変更点は `dir="rtl"` の追加のみ。文字列は右寄せになるので必要に応じてスタイルの設定が必要になるっぽい。


# 0030.htm
0010.htmに jQuery(3.3.1)を追加。Swiperの初期化はこれまで通り末尾(コンテナの読み込み後)に記述しても良いけど、JSなどを使う場合は document.ready に記述しても良いらしい。  
※外部JSとして切り出す場合に使えば良いかと。そういう意味で、今回のサンプルで初期化の場所を変更してもあまり意味はない。。


# 0040.htm
クエリパラメータ 'dir' の値をコンテナに設定するよに修正。 `Swiper` の初期化前に属性を設定する必要がありそう。
`update` が使えるかと思ったけど、このメソッドはコンテナ内の要素の変更時に使うものであって、コンテナそのものの変更は反映しないだろうと予想。


# 0050.htm
ナビゲーションの表示。ナビゲーションの表示そのものは公式サイトのDemo通り。デフォルトは非表示で[Toggle Navigation]で表示の切替。表示した場合は３秒後に非表示に設定。


# 0060.htm
イベントの確認。onメソッドでリスナー登録もできるし、`Swiper` のインスタンス生成時にも登録することができるらしい。


# 0070.htm、 swiper-01.js
ナビゲーションボタンがクリックされたらイベントを通知するように修正。イベント定義は `init: function init()` で行っているので、そこで`swiper.emit`をコールしてイベントを通知するように修正するだけ。  
ついでに画面のタップでナビゲーションを表示するように修正。イベントは tap(Swiper) → click(navigation) → click(Swiper) の順番で発生。ナビゲーションの表示は click(Swiper) で行うようにしたが、若干反応が鈍くなるのが気になる所(onTouchEndのイベント受けてから300ミリ秒後にイベントを発火させているのが原因か)。


# 0080.htm、 swiper-02.js
0070.htm の改善版。タップされた要素のクラスにナビゲーション(swiper-button-next か swiper-button-prev)が含まれる場合は Tapイベントを発火しないように修正。


# 0090.htm
ボタンのクリックでスライドを動的に追加。ただの文字列要素なので200程度であれば問題はなさそうな雰囲気。


# 0100.htm
現在のページを表示するように修正。デフォルト？の●表示だとページ数分●が表示されることになるので`type: 'fraction'`を指定して数値でのページ表示を設定。


# 0110.htm
１枚779KBの画像256枚を読み込むサンプル。Nexus 7(2013)でも落ちることなく表示は可能。ただし読み込みには相応の時間がかかる上に動きがカクつくことが多い。
まぁ、メモリを512MB程度使っているのでやむ無し。というより、よく落ちないなと驚く。。


# 0120.htm
LazyLoadingの機能が備わっているようなので試作。img の src ではなく data-src を使うところが味噌のよう。
Nexus 7では動作を確認していないけど、動きを見る限り必要になったら画像のローディンを開始するようなのでこれで良いかなと。
ただ、読み込みが完了した画像は開放しないと思うのでメモリ不足が深刻でなようなら別途方法を検討する必要があるのかもしれない。


# 0130.htm
Swiperは関係なし。スワイプでページ単位の切替ができるかの検証用。文書は著作権が切れているので公開しても問題はないはず。

、
